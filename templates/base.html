<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% block title %}Sistema{% endblock %}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>

<!-- TOPBAR -->
<header class="topbar">
    <div class="topbar-left">
        <div class="brand">Hospital Municipal da Mulher</div>
        <div class="subtitle">{% block subtitle %}{% endblock %}</div>
    </div>

    <div class="topbar-right">
        {% if user %}
            <span class="user-pill">
                {{ user.nome }} â€¢ {{ user.funcao }}
            </span>
            <a class="btn-top" href="/logout">Sair</a>
        {% endif %}
    </div>
</header>

<!-- LAYOUT -->
<div class="app-shell">

<!-- SIDEBAR -->
<aside class="sidebar-menu">
<div class="sidebar-title">Menu</div>

{% if user %}

<!-- ================================================= -->
<!-- DIREÃ‡ÃƒO -->
<!-- ================================================= -->
{% if user.funcao == "DireÃ§Ã£o" %}

<a class="nav-item {% if request.path == '/admin' %}active{% endif %}"
   href="/admin">ğŸ  Painel da DireÃ§Ã£o</a>

<a class="nav-item {% if request.path.startswith('/admin/funcionarios') %}active{% endif %}"
   href="/admin/funcionarios">ğŸ‘¥ FuncionÃ¡rios</a>

<a class="nav-item {% if request.path.startswith('/admin/importar-funcionarios') %}active{% endif %}"
   href="/admin/importar-funcionarios">ğŸ“¥ Importar FuncionÃ¡rios</a>

<a class="nav-item {% if request.path.startswith('/admin/cursos') %}active{% endif %}"
   href="/admin/cursos">ğŸ“š Cursos</a>

<a class="nav-item {% if request.path.startswith('/admin/setores') %}active{% endif %}"
   href="/admin/setores">ğŸ¥ Setores</a>

<!-- âœ… ESCALAS ADMIN (active corrigido) -->
<a class="nav-item {% if request.path.startswith('/admin/escalas') %}active{% endif %}"
   href="/admin/escalas">ğŸ“… Escalas</a>

<a class="nav-item {% if request.path.startswith('/admin/comunicados') %}active{% endif %}"
   href="/admin/comunicados">ğŸ“¢ Comunicados</a>

<a class="nav-item {% if request.path.startswith('/admin/certificados') %}active{% endif %}"
   href="/admin/certificados">ğŸ“„ Certificados</a>

<a class="nav-item {% if request.path.startswith('/admin/relatorios') %}active{% endif %}"
   href="/admin/relatorios">ğŸ“Š RelatÃ³rios</a>

<a class="nav-item {% if request.path.startswith('/admin/pedidos-materiais') %}active{% endif %}"
   href="/admin/pedidos-materiais">ğŸ“¦ Pedidos de Materiais</a>

<div class="nav-divider"></div>

<a class="nav-item {% if request.path.startswith('/chat') %}active{% endif %}"
   href="/chat">ğŸ’¬ Chat</a>

<!-- ================================================= -->
<!-- FUNCIONÃRIO -->
<!-- ================================================= -->
{% elif user.funcao == "FuncionÃ¡rio" %}

<a class="nav-item {% if request.path == '/dashboard' %}active{% endif %}"
   href="/dashboard">ğŸ  Meu Dashboard</a>

<a class="nav-item {% if request.path.startswith('/meu-perfil') %}active{% endif %}"
   href="/meu-perfil">ğŸ‘¤ Meu Perfil</a>

<!-- âœ… NOVO MENU ESCALAS (VISUALIZAÃ‡ÃƒO) - active corrigido -->
<a class="nav-item {% if request.path.startswith('/escalas') and not request.path.startswith('/admin') %}active{% endif %}"
   href="{{ url_for('escalas_view') }}">
   ğŸ“… Escalas
</a>

<a class="nav-item {% if request.path.startswith('/meus-cursos') %}active{% endif %}"
   href="/meus-cursos">ğŸ“š Meus Cursos</a>

<a class="nav-item {% if request.path.startswith('/meu-progresso') %}active{% endif %}"
   href="/meu-progresso">âœ… Meu Progresso</a>

<a class="nav-item {% if request.path.startswith('/meus-certificados') %}active{% endif %}"
   href="/meus-certificados">ğŸ“„ Meus Certificados</a>

<a class="nav-item {% if request.path.startswith('/comunicados') %}active{% endif %}"
   href="/comunicados">ğŸ“¢ Comunicados</a>

<a class="nav-item {% if request.path.startswith('/pedido-materiais') %}active{% endif %}"
   href="/pedido-materiais">ğŸ“¦ Pedido de Material</a>

<a class="nav-item {% if request.path.startswith('/chat') %}active{% endif %}"
   href="/chat">ğŸ’¬ Chat</a>

<a class="nav-item {% if request.path.startswith('/alterar-senha') %}active{% endif %}"
   href="/alterar-senha">ğŸ”‘ Alterar Senha</a>

{% endif %}

{% else %}
<a class="nav-item" href="/login">ğŸ” Login</a>
{% endif %}

</aside>

<!-- CONTEÃšDO -->
<main class="main-content">
{% block content %}{% endblock %}
</main>

</div>

</body>
</html>
